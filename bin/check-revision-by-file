#! /bin/bash

set -e
FILE_PATH=$3

function throw() {
  MESSAGE="$1"
  echo "$MESSAGE"
  false
}

# Prevent to pass removed files
REVISION_1=`git rev-parse "$1:$FILE_PATH"` || throw '比較対象が存在しません'
REVISION_2=`git rev-parse "$2:$FILE_PATH"` || throw '比較対象が存在しません'

diff <(git show $REVISION_1) <(git show $REVISION_2) &> /dev/null || throw "$FILE_PATH が一致しません"

echo OK
